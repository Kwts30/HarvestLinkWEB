<%- include('partials/header', { 
    title: 'Cart - HarvestLink', 
    cssFiles: ['/cart webpage/cart.css'],
    jsFiles: ['/assets/js/config.js', '/assets/js/auth.js', '/cart webpage/cart.js']
}) %>

<%- include('partials/navigation') %>

<!-- Main Cart Content -->
<main class="cart-main">
    <div class="cart-header">
        <h1>Shopping Cart</h1>
        <p>Review your items and proceed to checkout</p>
    </div>

    <!-- Cart Content -->
    <div class="cart-content" id="cart-content">
        <!-- Cart Items Section (Left Side) -->
        <div class="cart-items-section">
            <div class="cart-items-header">
                <h2>Your Items</h2>
            </div>
            <div id="cart-items-container">
                <!-- Empty cart message -->
                <div class="empty-cart-message" id="empty-cart-message" style="display: none;">
                    <div class="empty-cart-icon">ðŸ›’</div>
                    <h3>Your cart is empty</h3>
                    <p>Start shopping to add items to your cart!</p>
                    <a href="/shop" class="continue-shopping-btn">Continue Shopping</a>
                </div>
                
                <!-- Cart items container -->
                <div id="cart-items-list">
                    <!-- Cart items will be populated here -->
                </div>
                
                <!-- Cart item template (hidden) -->
                <template id="cart-item-template">
                    <div class="cart-item" data-product-id="">
                        <div class="cart-item-image">
                            <img src="/assets/shop/placeholder.png" alt="" onerror="this.src='/assets/shop/placeholder.png'">
                        </div>
                        <div class="cart-item-info">
                            <h3 class="cart-item-name"></h3>
                            <p class="cart-item-price"></p>
                            <p class="cart-item-stock"></p>
                        </div>
                        <div class="cart-item-quantity">
                            <button class="quantity-btn minus">-</button>
                            <span class="quantity-value"></span>
                            <button class="quantity-btn plus">+</button>
                        </div>
                        <div class="cart-item-actions">
                            <div class="cart-item-total"></div>
                            <button class="cart-item-delete">
                                <img src="/assets/shop/trash.png" alt="Delete" class="delete-icon" onerror="this.style.display='none'; this.nextSibling.style.display='inline';">
                                <span class="delete-text" style="display:none;">Delete</span>
                            </button>
                        </div>
                    </div>
                </template>
            </div>
        </div>
        
        <!-- Order Summary Section (Right Side) -->
        <div class="order-summary">
            <div class="summary-header">
                <h2>Order Summary</h2>
            </div>
            
            <div class="summary-row">
                <span>Subtotal:</span>
                <span class="summary-value" id="subtotal">â‚±0.00</span>
            </div>
            
            <div class="summary-row shipping">
                <span>Shipping:</span>
                <span class="summary-value" id="shipping">â‚±50.00</span>
            </div>
            
            <div class="summary-row tax">
                <span>Tax:</span>
                <span class="summary-value" id="tax">â‚±0.00</span>
            </div>
            
            <div class="summary-row total">
                <span>Total:</span>
                <span class="summary-value" id="total">â‚±0.00</span>
            </div>
            
            <button class="checkout-btn" id="checkout-btn" onclick="window.location.href='/checkout'">
                ðŸ›’ Proceed to Checkout
            </button>
        </div>
    </div>

    <!-- Empty Cart State -->
    <div class="empty-cart" id="empty-cart" style="display: none;">
        <div class="empty-cart-icon">ðŸ›’</div>
        <h2>Your cart is empty</h2>
        <p>Looks like you haven't added any items to your cart yet. Start shopping to fill it up!</p>
        <a href="/shop" class="continue-shopping-btn">Continue Shopping</a>
    </div>
</main>

<!-- Success Modal -->
<div class="success-modal" id="success-modal">
    <div class="success-content">
        <div class="success-icon">âœ…</div>
        <h2>Order Placed Successfully!</h2>
        <p>Thank you for your purchase. Your order has been received and will be processed shortly.</p>
        <button class="success-btn" onclick="closeSuccessModal()">Continue Shopping</button>
    </div>
</div>
